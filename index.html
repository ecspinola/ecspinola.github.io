<html><head><base href="https://www.alugueisweb.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Gestão de Aluguéis Residenciais</title>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pdfmake@0.1.70/build/pdfmake.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pdfmake@0.1.70/build/vfs_fonts.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f4;
  }
  .container {
    max-width: 1200px;
    margin: 0 auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1, h2 {
    color: #333;
  }
  input, select {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background-color: #45a049;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }
  th {
    background-color: #f2f2f2;
  }
</style>
</head>
<body>
<div id="app" class="container">
  <h1>Sistema de Gestão de Aluguéis Residenciais</h1>
  
  <h2>Cadastro de Inquilino</h2>
  <input v-model="novoInquilino.nome" placeholder="Nome">
  <input v-model="novoInquilino.cpf" placeholder="CPF">
  <input v-model="novoInquilino.endereco" placeholder="Endereço">
  <input v-model="novoInquilino.valorAluguel" type="number" placeholder="Valor do Aluguel">
  <button @click="cadastrarInquilino">Cadastrar</button>

  <h2>Lista de Inquilinos</h2>
  <table>
    <thead>
      <tr>
        <th>Nome</th>
        <th>CPF</th>
        <th>Endereço</th>
        <th>Valor do Aluguel</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="(inquilino, index) in inquilinos" :key="index">
        <td>{{ inquilino.nome }}</td>
        <td>{{ inquilino.cpf }}</td>
        <td>{{ inquilino.endereco }}</td>
        <td>R$ {{ inquilino.valorAluguel.toFixed(2) }}</td>
        <td>
          <button @click="editarInquilino(index)">Editar</button>
          <button @click="removerInquilino(index)">Remover</button>
          <button @click="registrarPagamento(index)">Registrar Pagamento</button>
        </td>
      </tr>
    </tbody>
  </table>

  <h2>Registro de Pagamentos</h2>
  <table>
    <thead>
      <tr>
        <th>Inquilino</th>
        <th>Data</th>
        <th>Valor</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="(pagamento, index) in pagamentos" :key="index">
        <td>{{ pagamento.inquilino }}</td>
        <td>{{ pagamento.data }}</td>
        <td>R$ {{ pagamento.valor.toFixed(2) }}</td>
        <td>
          <button @click="gerarRecibo(index)">Gerar Recibo</button>
        </td>
      </tr>
    </tbody>
  </table>

  <h2>Relatório Mensal</h2>
  <input v-model="mesRelatorio" type="month">
  <button @click="gerarRelatorioMensal">Gerar Relatório</button>
</div>

<script>
new Vue({
  el: '#app',
  data: {
    inquilinos: [],
    pagamentos: [],
    novoInquilino: {
      nome: '',
      cpf: '',
      endereco: '',
      valorAluguel: 0
    },
    mesRelatorio: ''
  },
  methods: {
    cadastrarInquilino() {
      this.inquilinos.push({...this.novoInquilino});
      this.novoInquilino = {nome: '', cpf: '', endereco: '', valorAluguel: 0};
      this.salvarDados();
    },
    editarInquilino(index) {
      // Implementar lógica de edição
      this.salvarDados();
    },
    removerInquilino(index) {
      this.inquilinos.splice(index, 1);
      this.salvarDados();
    },
    registrarPagamento(index) {
      const inquilino = this.inquilinos[index];
      const pagamento = {
        inquilino: inquilino.nome,
        data: new Date().toISOString().split('T')[0],
        valor: inquilino.valorAluguel
      };
      this.pagamentos.push(pagamento);
      this.salvarDados();
    },
    gerarRecibo(index) {
      const pagamento = this.pagamentos[index];
      const docDefinition = {
        content: [
          { text: 'Recibo de Aluguel', style: 'header' },
          { text: `Inquilino: ${pagamento.inquilino}` },
          { text: `Data: ${pagamento.data}` },
          { text: `Valor: R$ ${pagamento.valor.toFixed(2)}` },
          { text: 'Assinatura: ______________________________' }
        ],
        styles: {
          header: {
            fontSize: 18,
            bold: true,
            margin: [0, 0, 0, 10]
          }
        }
      };
      pdfMake.createPdf(docDefinition).download('recibo_aluguel.pdf');
    },
    gerarRelatorioMensal() {
      const [ano, mes] = this.mesRelatorio.split('-');
      const pagamentosFiltrados = this.pagamentos.filter(p => {
        const [pAno, pMes] = p.data.split('-');
        return pAno === ano && pMes === mes;
      });
      
      const total = pagamentosFiltrados.reduce((sum, p) => sum + p.valor, 0);
      
      const docDefinition = {
        content: [
          { text: `Relatório Mensal - ${mes}/${ano}`, style: 'header' },
          { text: `Total de pagamentos: ${pagamentosFiltrados.length}` },
          { text: `Valor total recebido: R$ ${total.toFixed(2)}` },
          { text: 'Detalhamento:', style: 'subheader' },
          {
            table: {
              headerRows: 1,
              widths: ['*', 'auto', 'auto'],
              body: [
                ['Inquilino', 'Data', 'Valor'],
                ...pagamentosFiltrados.map(p => [p.inquilino, p.data, `R$ ${p.valor.toFixed(2)}`])
              ]
            }
          }
        ],
        styles: {
          header: {
            fontSize: 18,
            bold: true,
            margin: [0, 0, 0, 10]
          },
          subheader: {
            fontSize: 14,
            bold: true,
            margin: [0, 10, 0, 5]
          }
        }
      };
      pdfMake.createPdf(docDefinition).download(`relatorio_${mes}_${ano}.pdf`);
    },
    salvarDados() {
      localStorage.setItem('inquilinos', JSON.stringify(this.inquilinos));
      localStorage.setItem('pagamentos', JSON.stringify(this.pagamentos));
    },
    carregarDados() {
      const inquilinosJSON = localStorage.getItem('inquilinos');
      const pagamentosJSON = localStorage.getItem('pagamentos');
      if (inquilinosJSON) this.inquilinos = JSON.parse(inquilinosJSON);
      if (pagamentosJSON) this.pagamentos = JSON.parse(pagamentosJSON);
    }
  },
  mounted() {
    this.carregarDados();
  }
});
</script>
</body></html>